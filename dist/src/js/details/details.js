"use strict";define(["jquery","../index/checklogin","../index/cookie","../url"],function(h,t,m,e){var u,o=e.url+"/tianmao/php/",g=localStorage.getItem("logininfo"),w=location.search;w=w.substr(1),arr=w.split("=");var y=h(".showleft-down"),v=h(".showpic-left"),x=h(".showpic-middle h1"),b=h(".showpic-subtitle"),z=h(".showpic-middle .price"),q=h(".total");function k(o,i){this.leftzoom=h(".fdj"),this.leftwrap=h(".showpic-left"),this.leftright=h(".showleft-right"),this.init=function(){var r=this;this.leftright.css({display:"none"}),this.leftwrap.mouseover(function(t){var e;r.leftright.css({display:"block"}),r.leftzoom.css({display:"block"}),e="<img src="+i.eq(o).attr("src")+" style='width:936px;height:936px;position:absolute;'>",r.leftright.html(e);var s=h(".showleft-right img");document.onmousemove=function(t){var e=t||window,o=(document.documentElement.scrollTop,e.pageX-r.leftwrap.offset().left-r.leftzoom[0].offsetWidth/2),i=e.pageY-r.leftwrap.offset().top-r.leftzoom[0].offsetHeight/2;o<0&&(o=0),i<0&&(i=0),o>=r.leftwrap[0].offsetWidth-r.leftzoom[0].offsetWidth&&(o=r.leftwrap[0].offsetWidth-r.leftzoom[0].offsetWidth),i>=r.leftwrap[0].offsetHeight-r.leftzoom[0].offsetHeight&&(i=r.leftwrap[0].offsetHeight-r.leftzoom[0].offsetHeight),r.leftzoom.css({left:o}),r.leftzoom.css({top:i}),s.css({left:-2*o}),s.css({top:-2*i})}}),this.leftwrap.mouseout(function(){r.leftright.css({display:"none"}),r.leftzoom.css({display:"none"}),document.onmousemove=null})}}h.ajax({type:"post",url:o+"details.php",dataType:"json",data:{small:"yes",id:arr[1]}}).done(function(t){var e=0,o="";x.html(t[0].description1),b.html(t[0].description2),z.html(t[0].price),g&&(w=location.search,arr=w.substr(1),arr=arr.split("="),m.getCookie(arr[0]+arr[1])&&q.html(Number(m.getCookie(arr[0]+arr[1]))*Number(z.val())));var i=!0,s=!1,r=void 0;try{for(var l,a=t[Symbol.iterator]();!(i=(l=a.next()).done);i=!0){var n=l.value;o="<a style='display:inline-block;margin-top:11px;margin-left:20px;'>\n\t\t\t<img src="+n.smaurl+" style='display:block;width:60px;height:60px;'>\n\t\t\t</a>",h(o).appendTo(y),y.find("a").eq(e).attr("index",e),y.find("a img").eq(e).attr("index",e);var f="<img class='son' src="+n.bigurl+" style='position:absolute;width:418px;height:418px;'>";h(f).appendTo(v),v.find(".son").eq(e).attr("index",e),e++}}catch(t){s=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(s)throw r}}for(var c=h(".showleft-down>a"),p=h(".showpic-left>img"),d=0;d<c.size();d++)p.eq(d).css({display:"none"});p.eq(0).css({display:"block"}),u=p.eq(0).attr("index");for(d=0;d<c.size();d++)c.eq(d).mouseover(function(){for(var t=0;t<c.size();t++)c.eq(t).css({border:0}),p.eq(t).css({display:"none"});h(this).css({border:"2px solid black"}),p.eq(h(this).attr("index")).css({display:"block"}),new k(u=h(this).attr("index"),p).init()});new k(u,p).init()}),require(["../src/js/details/addcar"])});