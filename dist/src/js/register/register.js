"use strict";define(["jquery","../url"],function(n,l){var a=l.url+"/tianmao/php/";n.ajax({type:"post",dataType:"json",url:a+"loginback.php",data:{login:"login",username:"",daogou:""}}).done(function(l){var a=n("#loginBack"),t="<a href="+l[0].tarurl+" style='display:inline-block;'><img src="+l[0].imgurl+" style='width:1190px;height:600px;'></a>";n(t).appendTo(a)});var t=n("#name"),e=n("#number"),i=n("#certificate"),h=n("#word"),r=n("#confirm"),o=n("#submit"),u=n("#loginBorder span"),m=flag2=flag3=flag4=flag5=!1;t.on("blur",function(){n(this).val()&&n.ajax({type:"post",url:a+"register.php",data:{username:t.val(),number:1}}).done(function(l){"true"==l?(u.eq(1).html("√"),m=!0,u.eq(0).html("")):(u.eq(0).html("用户名已存在"),u.eq(1).html("X"),m=!1)})}),e.on("blur",function(){if(n(this).val()){e.val().match(/^1[3-9][0-9]{9}/g)?n.ajax({type:"post",url:a+"register.php",data:{username:2,number:e.val()}}).done(function(l){"true"==l?(u.eq(2).html("√"),flag2=!0,u.eq(0).html("")):(u.eq(0).html("手机号已存在"),flag2=!1)}):e.val().match(/[^0-9]/g)?(u.eq(0).html("电话号码必须为数字"),flag2=!1):1<=e.val().length&&n(this).val().length<=10?(u.eq(0).html("电话号码长度不够"),flag2=!1):e.val().length<=0?u.eq(0).html("号码不能为空！"):(u.eq(0).html("填写的号码不符合1[3-9]"),flag2=!1)}}),i.on("focus",function(){for(var l="",a=0;a<4;a++)l+=Math.round(9*Math.random());u.eq(3).html(l)}),i.on("blur",function(){certificate.value==str?(span[3].innerHTML="√",flag3=!0,span[0].innerHTML=""):(span[0].innerHTML="验证码不正确！",flag3=!1)}),h.on("blur",function(){var l=0,a=0,t=0;if(n(this).val().match(/^[\w]{6,}$/g)){for(var e=0;e<n(this).val().length;e++)"A"<=n(this).val()[e]&&n(this).val()[e]<="Z"&&(l=1),"a"<=n(this).val()[e]&&n(this).val()[e]<="z"&&(a=2),"0"<=n(this).val()[e]&&n(this).val()[e]<="9"&&(t=3);0<l&&0<a&&0<t?u.eq(0).html("密码强度很强"):3<=l+a+t&&l+a+t<=5?u.eq(0).html("密码强度中等"):u.eq(0).html("密码强度很弱"),u.eq(4).html("√"),flag4=!0}else this.value.length<=5&&0<this.value.length?(u.eq(0).html("密码长度不够"),u.eq(4).html("X"),flag4=!1):u.eq(4).html("用户密码不能为空")}),r.on("blur",function(){n(this).val()&&(n(this).val()==h.val()?(u.eq(5).html("√"),flag5=!0,u.eq(0).html("")):(u.eq(0).html("密码确认不对！"),u.eq(5).html("X"),flag5=!1))}),o.on("click",function(){return!!(m&&flag2&&flag3&&flag4&&flag5)&&(t.val()&&h.val()?void n.ajax({type:"post",url:a+"register.php",data:{username:t.val(),password:h.val(),number:e.val()}}).done(function(l){if("true"!=l)return t.val().html("注册怎么了"),!1;localStorage.setItem("logininfo",t.val()),window.location.href="http://localhost/tianmao/src/index.html"}):(u.eq(0).html("用户名或密码不能为空！"),!1))})});